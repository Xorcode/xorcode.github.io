<!DOCTYPE html>
<html lang="en">

  <head>
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta charset="utf-8">
  <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

  <title>Node.js: Scaffolding Modern Web Applications with Flatiron</title>
  <meta name="description" content="After having used Express, Jade, Stylus, and Mongoose for quite some time we decided to try something new. Enter Flatiron, Union, Director, Plates, and Resou...">

  <script src="https://use.typekit.net/nsl7rga.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/js/vendor/jquery.min.js"><\/script>')</script>

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://xorcode.com/code/2013/08/05/node-js-scaffolding-modern-web-applications-with-flatiron.html">
  <link rel="alternate" type="application/rss+xml" title="Xorcode" href="/feed.xml">

  
</head>


  <body class="post">

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      <img src="/assets/img/logotype-light.png" alt="Xorcode">
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <span class="fa fa-bars fa-2x" aria-hidden="true" title="Skip to main navigation"><span class="sr-only">Skip to main navigation</span></span>
    </a>
    <nav role="navigation">
      <ul id="menu-primary-menu" class="navigation-menu show">
        <li class='menu-item'><a href='blog/categories/cloud'>Cloud</a></li><li class='menu-item'><a href='blog/categories/code'>Code</a></li><li class='menu-item'><a href='blog/categories/server'>Server</a></li>
      </ul>
    </nav>
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <section class="blog-entry left">
  <article class="type-post" itemscope itemtype="http://schema.org/BlogPosting">
    

<span class="type">
  
    <a class='category' href='/blog/categories/code/'>Code</a>
  
</span>


    <h1 itemprop="name headline">Node.js: Scaffolding Modern Web Applications with Flatiron</h1>
    <p class="date post-meta"><time datetime="2013-08-05T23:04:00+00:00" itemprop="datePublished">Aug 5, 2013</time></p>
    <p>After having used <a href="http://bit.ly/152sQOY">Express</a>, <a href="http://bit.ly/152sQP1">Jade</a>, <a href="http://bit.ly/152sQP4">Stylus</a>, and <a href="http://bit.ly/152sQP5">Mongoose</a> for quite some time we decided to try something new. Enter <a href="http://bit.ly/152sPKM">Flatiron</a>, <a href="http://bit.ly/152sPKN">Union</a>, <a href="http://bit.ly/152sPKP">Director</a>, <a href="http://bit.ly/152sPKQ">Plates</a>, and <a href="http://bit.ly/12Wldzi">Resourceful</a>.</p>

<!--more-->

<blockquote>
  <p>No one agrees on frameworks. It’s difficult to get consensus on how much or how little a framework should do. Flatiron’s approach is to package simple to use yet full featured components and let developers subtract or add what they want.</p>
</blockquote>

<p>Flatiron supports application boilerplates as well as straight inclusion in your <code class="highlighter-rouge">package.json</code> file.</p>

<h3 id="getting-started-with-a-boilerplate">Getting started with a boilerplate</h3>

<p>In order to get started with flatiron it needs to be installed on your system.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>npm install flatiron -g
</code></pre>
</div>

<p>Once installed, the <code class="highlighter-rouge">flatiron</code> command line tool will be available. In order to start with a new web application boilerplate, issue the following command:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>flatiron create &lt;app-name&gt; http
</code></pre>
</div>

<p>The boilerplate allows you to quickly start scaffolding a web application without a lot of custom development.</p>

<h3 id="advanced-use-of-flatiron-in-your-project">Advanced use of flatiron in your project</h3>

<p>Our <code class="highlighter-rouge">package.json</code> file includes several other components used in conjunction with flatiron.</p>

<div id="gist-6162027-package-json">
  <script src="https://gist.github.com/6162027.js?file=package.json"></script>
</div>

<p>We decided to use flatiron, plates, resourceful, restful, and union for our example project.</p>

<div id="gist-6162027-app-js">
  <script src="https://gist.github.com/6162027.js?file=app.js"></script>
</div>

<p>Our application server gets bootstrapped and launched through the <code class="highlighter-rouge">app.js</code> file. The application uses Union middleware to integrate plates, resourceful, and restful into flatiron.</p>

<div id="gist-6162027-config-json">
  <script src="https://gist.github.com/6162027.js?file=config.json"></script>
</div>

<h3 id="application-configuration">Application Configuration</h3>

<p>The <code class="highlighter-rouge">restful</code> and <code class="highlighter-rouge">resourceful</code> components are configured in the configuration file. Our example uses CouchDB. If you do not wish to use Couch, simply change the <code class="highlighter-rouge">engine</code> option to <code class="highlighter-rouge">memory</code> and remove <code class="highlighter-rouge">uri</code> and <code class="highlighter-rouge">auth</code> from the <code class="highlighter-rouge">resourceful</code> block.</p>

<h3 id="controllers-and-views">Controllers and Views</h3>

<p>We decided to snag the <strong>plates</strong> plugin from the <code class="highlighter-rouge">scaffolding</code> branch in the <code class="highlighter-rouge">flatiron/flatiron</code> repository to allow us to easily render views in our application.</p>

<div id="gist-6162027-plates-js">
  <script src="https://gist.github.com/6162027.js?file=plates.js"></script>
</div>

<p>The <strong>controllers</strong> plugin serves as a new addition to flatiron and it’s based on the plates plugin.</p>

<div id="gist-6162027-controllers-js">
  <script src="https://gist.github.com/6162027.js?file=controllers.js"></script>
</div>

<p>The controllers plugin simplifies the inclusion of custom director routes. Each controller file contains all logic necessary for its routes to function.</p>

<p>The default controller serves up the index page.</p>

<div id="gist-6162027-default-js">
  <script src="https://gist.github.com/6162027.js?file=default.js"></script>
</div>

<p>Our views use the <code class="highlighter-rouge">plates</code> module and the <code class="highlighter-rouge">plates</code> plugin which supports layouts. This example contains a basic layout to get you started.</p>

<div id="gist-6162027-app-html">
  <script src="https://gist.github.com/6162027.js?file=app.html"></script>
</div>

<p>The index page automatically includes this layout and its contents replace the <code class="highlighter-rouge">&lt;div id="body"&gt;&lt;/div&gt;</code> tag.</p>

<div id="gist-6162027-index-html">
  <script src="https://gist.github.com/6162027.js?file=index.html"></script>
</div>

<h3 id="automatically-generated-rest-api-resources">Automatically generated REST API resources</h3>

<p>By using the <code class="highlighter-rouge">restful</code> middleware plugin our application automatically discovers and makes resources available in the <code class="highlighter-rouge">/api</code> directory. The API prefix can be modified in the <code class="highlighter-rouge">config.json</code> file.</p>

<p>Our application now reports the following available resources:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>GET     / 
GET     /api 
GET     /api/user 
POST    /api/user 
POST    /api/user/([._a-zA-Z0-9-]+) 
GET     /api/user/([._a-zA-Z0-9-]+) 
DELETE  /api/user/([._a-zA-Z0-9-]+) 
PUT     /api/user/([._a-zA-Z0-9-]+) 
</code></pre>
</div>

<p>Change the <code class="highlighter-rouge">explore</code> configuration option to <code class="highlighter-rouge">false</code> in order to not expose available API end-points.</p>

<h3 id="resources-with-resourceful">Resources with Resourceful</h3>

<p>We also wrote a <code class="highlighter-rouge">user</code> resource with a couple of helper methods to ease generation of <abbr title="Password-Based Key Derivation Function 2">PBKDF2</abbr> encrypted passwords for heightened security.</p>

<div id="gist-6162027-user-js">
  <script src="https://gist.github.com/6162027.js?file=user.js"></script>
</div>

<p>The packer used in the <code class="highlighter-rouge">user</code> resource resides in the <code class="highlighter-rouge">utils.js</code> file.</p>

<p>To quickly get started by inserting a user, utilize the snippet from the comment inside the <code class="highlighter-rouge">user.js</code> file.</p>

<div id="gist-6162027-utils-js">
  <script src="https://gist.github.com/6162027.js?file=utils.js"></script>
</div>

<p>With this custom boilerplate we are now ready to start cranking out pages as well as API end-points that can be consumed by our web application and mobile applications alike.</p>

<p>Feel free to fork our repository to add your own modifications. We greatly appreciate pull requests with improvements and new ideas!</p>

<p><a href="https://github.com/Xorcode/flatiron-example" class="button"><i class="fa fa-github"></i> Fork on Github</a></p>

    
    
      
        <p>
          
            <a href="/blog/tags/node.js.html" rel="tag">node.js</a>, <a href="/blog/tags/flatiron.html" rel="tag">flatiron</a>, <a href="/blog/tags/union.html" rel="tag">union</a>, <a href="/blog/tags/resourceful.html" rel="tag">resourceful</a>, <a href="/blog/tags/restful.html" rel="tag">restful</a>, <a href="/blog/tags/plates.html" rel="tag">plates</a>
          
        </p>
      
    
    <ul class="pager" style="padding-bottom:20px;">
      <li class="previous"><a href="/cloud/server/2013/07/28/running-node-js-with-dokku-on-an-ubuntu-instance.html" title="Previous Post: AWS PaaS: Running Node.js with Dokku on an Ubuntu instance" class="button"><i class="fa fa-arrow-left" aria-hidden="true"></i> Previous article</a></li>
      <li class="next"><a href="/code/2013/08/10/using-backbeam-io-in-titanium-studio-mobile-apps.html" title="Next Post: Using Backbeam in Titanium™ mobile applications" class="button">Next article <i class="fa fa-arrow-right" aria-hidden="true"></i></a></li>
    </ul>
    
      
    
  </article>
</section>

      </div>
    </main>

    <footer class="footer" role="contentinfo">
  <div class="footer-logo">
    <img src="/assets/img/logo-mark-light.png " alt="Xorcode">
  </div>
  <div class="footer-links">
    <ul>
      <li><h3>Content</h3></li>
      <li><a href='blog/categories/cloud'>Cloud</a></li><li><a href='blog/categories/code'>Code</a></li><li><a href='blog/categories/server'>Server</a></li>
    </ul>
    <ul>
      <li><h3>Follow Us</h3></li>
      <li><a href="javascript:void(0)"><i class="fa fa-twitter fa-inverse"></i> Twitter</a></li>
      <li><a href="javascript:void(0)"><i class="fa fa-github fa-inverse"></i> Github</a></li>
      <li><a href="javascript:void(0)"><i class="fa fa-bitbucket fa-inverse"></i> Bitbucket</a></li>
      <li><a href="javascript:void(0)"><i class="fa fa-facebook fa-inverse"></i> Facebook</a></li>
      <li><a href="javascript:void(0)"><i class="fa fa-linkedin fa-inverse"></i> LinkedIn</a></li>
      <li><a href="javascript:void(0)"><i class="fa fa-google-plus fa-inverse"></i> Google+</a></li>
    </ul>
    <ul>
      <li><h3>Legal</h3></li>
      <li><a href="javascript:void(0)">Terms and Conditions</a></li>
      <li><a href="javascript:void(0)">Privacy Policy</a></li>
    </ul>
  </div>

  <hr>

  <p>Copyright © 2003–2017 Xorcode, all rights reserved. Content available under the <span class="fa fa-creative-commons"></span> <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons BY-NC-SA 4.0</a> license.</p>
</footer>


    <script src="/assets/js/jquery.matchHeight.js"></script>
    <script src="/assets/js/functions.js"></script>
  </body>

</html>
